<div class="mdl-grid">
    <div class="mdl-card mdl-shadow--16dp util-center util-spacing-h--40px">
        <div class="mdl-card__title mdl-color--red-500">
            <h2 class="mdl-card__title-text mdl-color-text--white">Crea una cuenta nueva</h2>
        </div>
        <div class="mdl-card__supporting-text mdl-grid">
            <form [formGroup]="form" (ngSubmit)="onSubmit()" method="POST" action="">
                <input type="hidden" name="action" value="register" />
                  
                <mdl-textfield type="text" label="Nombre de usuario" formControlName="username"
                floating-label class="mdl-cell mdl-cell--12-col form-group mdl-color-text--grey" maxlength="45" (keyup)="usernameChange()"
                error-msg="Campo obligatorio. Longitud máxima: 45 caracteres." required></mdl-textfield>
                <span *ngIf="username_already" class="error_validity">Este nombre de usuario ya está en uso.</span>

                <mdl-textfield type="email" label="Correo Electrónico" formControlName="email"
                floating-label class="mdl-cell mdl-cell--12-col form-group mdl-color-text--grey" required
                (keyup)="emailChange()" pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" maxlength="255"
                error-msg="Campo obligatorio. Debe ser un correo electrónico y no superar los 255 caracteres."></mdl-textfield>
                <span *ngIf="email_already" class="error_validity">Este correo electrónico ya está en uso.</span>

                <mdl-textfield type="text" label="Nombre" formControlName="name" maxlength="100"
                floating-label class="mdl-cell mdl-cell--6-col form-group mdl-color-text--grey" required
                error-msg="Campo obligatorio. Longitud máxima: 100 caracteres."></mdl-textfield>

                <mdl-textfield type="text" label="Apellidos" formControlName="surname" maxlength="255"
                floating-label class="mdl-cell mdl-cell--6-col form-group mdl-color-text--grey" required
                error-msg="Campo obligatorio. Longitud máxima: 255 caracteres."></mdl-textfield>

                <mdl-textfield type="password" label="Contraseña" formControlName="password" minlength="6" pattern=".{6,}"
                floating-label class="mdl-cell mdl-cell--6-col form-group mdl-color-text--grey" required
                error-msg="Campo obligatorio. Longitud mínima: 6 caracteres."></mdl-textfield>

                <mdl-textfield type="password" label="Confirmar contraseña" formControlName="password_confirm" minlength="6"
                floating-label class="mdl-cell mdl-cell--6-col form-group mdl-color-text--grey" pattern=".{6,}"
                required></mdl-textfield>
                <span *ngIf="!passwordRepeat()" class="error_validity" id="not_match">Las contraseñas no coinciden</span>

                <div *ngIf="!loading" class="mdl-cell mdl-cell--12-col send-button" align="center">
                    <button type="submit" class="mdl-button mdl-js-ripple-effect mdl-js-button mdl-button--raised mdl-button--colored"
                    [disabled]="!form.valid || !passwordRepeat() || email_already || username_already">
                        Registrarse
                    </button>
                </div>

                <div *ngIf="loading" class="mdl-cell mdl-cell--12-col send-button" align="center">
                    <button type="submit" class="mdl-button mdl-js-ripple-effect mdl-js-button mdl-button--raised mdl-button--colored" disabled>
                        Registrándose...
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>